<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>GPS í…ŒìŠ¤íŠ¸</title>
</head>
<body>
<h2>ğŸ“ í˜„ì¬ ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸° í…ŒìŠ¤íŠ¸</h2>
<button onclick="getLocation()">ë‚´ ìœ„ì¹˜ í™•ì¸</button>
<p id="output"></p>

<script>
    function getLocation(retry = 0) {
        if (!navigator.geolocation) {
            document.getElementById("output").innerText = "ì´ ë¸Œë¼ìš°ì €ëŠ” ìœ„ì¹˜ ì •ë³´ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
            return;
        }

        navigator.geolocation.getCurrentPosition(
            (position) => {
                const lat = position.coords.latitude;
                const lng = position.coords.longitude;
                document.getElementById("output").innerText = `âœ… ìœ„ë„: ${lat}, ê²½ë„: ${lng}`;
                console.log("ğŸ“ ìœ„ë„:", lat, "ê²½ë„:", lng);
            },
            (error) => {
                console.warn("ğŸš¨ ìœ„ì¹˜ ì •ë³´ ì˜¤ë¥˜:", error.message);
                if (retry < 3) {
                    // ìµœëŒ€ 3ë²ˆê¹Œì§€ ì¬ì‹œë„ (2ì´ˆ ê°„ê²©)
                    setTimeout(() => getLocation(retry + 1), 2000);
                } else {
                    document.getElementById("output").innerText =
                        "âŒ ìœ„ì¹˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ìœ„ì¹˜ ì„œë¹„ìŠ¤ë¥¼ í™œì„±í™”í–ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.";
                }
            },
            {
                enableHighAccuracy: false,  // ì‹¤ë‚´ì—ì„œëŠ” falseê°€ ë” ì•ˆì •ì 
                timeout: 10000,
                maximumAge: 10000
            }
        );
    }
</script>
</body>
</html>
